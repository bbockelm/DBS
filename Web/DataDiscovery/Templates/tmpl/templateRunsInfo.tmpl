<!-- templateRunsInfo.tmpl -->
<script type="text/javascript">registerAjaxPhedexCalls();</script>
#import urllib
#from DDUtil import sizeFormat, colorSizeHTMLFormat
#set nRun=len($runList)
#if $proc
<div>
Dataset:<br />
<table class="offset_left">
<tr>
<td align="left">
<b>$proc</b>
</td></tr></table>
contains $nRun run(s)
</div>
#end if
<p />
###<table id="$tableId" class="sortable" cellspacing="0" cellpadding="0" border="1">
<table id="$tableId" cellspacing="0" cellpadding="0" border="1">
<tr valign="top" align="center" id="tr$tableId" name="tr$tableId" class="sortable_gray">
<td>Run</td>
<td>Type</td>
<td>Events</td>
<td>Lumi sec.</td>
<td>Total L</td>
<td>Store</td>
<td>StartOfRun</td>
<td>EndOfRun</td>
<td>dataset</td>
<td># Files</td>
<td>Size</td>
<td>Transfer</td>
#if $userMode=="runManager"
#* here we took first item from runList and 11th element which is dsType *#
#set first=$runList[0]
#set firstType=$first[11]
#if $len($runList) and $firstType.lower()!='mc'
<td>Mode</td>
<td>System</td>
#end if
#end if
#if $userMode=="expert"
<td>Created by</td>
<td>Creation time</td>
<td>Modified by</td>
<td>Modification time</td>
#end if
<td>LFNs</td>
</tr>
###for dbsDict in $runList
#* (run,nEvts,nLumis,totLumi,store,sRun,eRun,cBy,cDate,mBy,mDate,dsType,path) *#

#for item in $runList
#set run    = item[0]
#set nEvts  = item[1]
#set nLumis = item[2]
#set totLumi= item[3]
#set store  = item[4]
#set sRun   = item[5]
#set eRun   = item[6]
#set cBy    = item[7]
#set cDate  = item[8]
#set mBy    = item[9]
#set mDate  = item[10]
#set dsType = item[11]
#set procDS = item[12]
#set sites  = item[13]
#set fSize  = item[14]
#set nFiles = item[15]
<tr valign="top" bgcolor="#FFFADC" name="dbs_row_sumInfo" id="dbs_row_sumInfo">
### I need to get run type and decide do I need or not provide a link to run quality DB.
<td align="center">
#if $dsType.lower()!='mc'
<a href="http://cmsmon.cern.ch/cmsdb/servlet/RunSummary?RUN=$run">
$run
</a>
#else
$run
#end if
</td>
<td align="right">$dsType </td>
<td align="right">$nEvts </td>
<td align="right">$nLumis </td>
<td align="right">$totLumi </td>
<td align="right">$store </td>
<td align="right">$sRun </td>
<td align="right">$eRun </td>
<td>
<a href="$host/getData?dbsInst=$dbsInst&amp;proc=$urllib.quote($procDS)&amp;userMode=$userMode&amp;ajax=0">
#set pathName="/"+$procDS[1:].replace("/","<br />/")
$pathName
</a>
</td>
<td align="right">$nFiles</td>
<td align="right">$colorSizeHTMLFormat($fSize)</td>
#### Here is Phedex transfer status call for each site
<td align="right">

#set phedexResponse="multiple:"+$procDS+":"+str($run)
<div id="$phedexResponse">
#for site in $sites
$site
#end for
</div>

<script type="text/javascript">
var phedexUpdater = new GetDataUpdater('$phedexResponse','replace','noResultsMenu');
ajaxEngine.registerAjaxObject('$phedexResponse',phedexUpdater);
ajaxPhedexStatus('','$procDS','$run');
</script>

</td>

#if $userMode=="runManager"
#if $dsType.lower()!='mc'
#if $runDBInfo.has_key($run)
#set runmode,system=$runDBInfo[$run]
#else
#set runmode='N/A'
#set system='N/A'
#end if
<td align="right">
$runmode
</td>
<td align="right">
$system
</td>
#end if
#end if
#if $userMode=="expert"
<td align="right">$cBy </td>
<td align="right">$cDate </td>
<td align="right">$mBy </td>
<td align="right">$mDate </td>
#end if
<td align="right">
<a href="$host/getLFN_txt?dbsInst=$dbsInst&amp;blockName=*&amp;dataset=$procDS&amp;userMode=$userMode&amp;run=$run">txt</a>
<a href="$host/getLFNlist?dbsInst=$dbsInst&amp;blockName=*&amp;dataset=$procDS&amp;userMode=$userMode&amp;run=$run">details</a>
</td>
</tr>
#end for
</table>
<hr class="dbs" />
<!-- end of templateRunsInfo.tmpl -->
